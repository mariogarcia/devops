{
    "variables": {
        "user": "admindebian",
        "password": "admindebian",
        "disk_size": "10000"
    },
    "builders":
    [
        {
            "type": "qemu",
            "vm_name": "debian10",
            "format": "qcow2",
            "accelerator": "kvm",
            "memory": 1024,
            "headless": true,

            "iso_checksum": "3dbb597b7f11dbda71cda08d4c1339c1eb565e784c75409987fa2b91182d9240",
            "iso_checksum_type": "sha256",
            "iso_url": "https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/debian-10.0.0-amd64-netinst.iso",

            "output_directory": "out",

            "ssh_username": "{{user `user`}}",
            "ssh_password": "{{user `password`}}",
            "ssh_timeout": "5m",
            "ssh_wait_timeout": "60m",
            "shutdown_command": "echo '{{user `password`}}'|sudo -S shutdown -h now",

            "net_device": "virtio-net",
            "disk_interface": "virtio",
            "disk_size": "{{ user `disk_size` }}",
            "http_directory": "http",
            "boot_wait": "10s",
            "boot_command": [
                "<esc><wait><wait>",
                "install ",

                "auto=true ",
                "priority=critical ",
                "interface=auto ",
                "url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/debian-10.cfg ",

                "passwd/user-fullname={{ user `user` }} ",
                "passwd/user-password={{ user `password` }} ",
                "passwd/user-password-again={{ user `password` }} ",
                "passwd/username={{ user `user` }} ",

                "<enter>"
            ]
        }
    ]
}
